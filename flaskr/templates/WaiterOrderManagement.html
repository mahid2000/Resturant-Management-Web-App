






<!DOCTYPE html>
<html lang = "en">
	<head>
        <style>

table {

  font-family: arial, sans-serif;

  border-collapse: collapse;

  width: 100%;

}


td, th {

  border: 1px solid #dddddd;

  text-align: left;

  padding: 8px;

}


tr:nth-child(even) {

  background-color: #dddddd;

}

</style>
		<meta charset = "UTF-8">
		<link rel = "stylesheet" href = "{{ url_for('static', filename = 'css/style.css') }}">
		<title>Home</title>
	</head>
	<body>
        <header>
            <h1>Restaurant Name</h1>
            <h2>Home</h2>
            <nav>
                <ul>
                    <li><a href="{{ url_for('home') }}">Home</a></li>
                    <li><a href="{{ url_for('menu') }}">Menu</a></li>
                    {% if user[3] == 4 %}
                        <li><a href="{{ url_for('logout') }}">Logout</a></li>
                    {% endif %}
                </ul>
            </nav>
        </header>
        <br>
        <main>
            <h3>Welcome</h3>
            <p>{{ user[1] }} {{ user[2] }}</p>
        </main>




        <h1>Restaurant Order Management</h1>
	<table id="orders">
		<thead>
			<tr>
				<th>Table number</th>
				<th>Status</th>
				<th>-</th>
				<th>-</th>
				<th>-</th>
			</tr>
		</thead>
		<tbody>
			<!-- Table rows will be dynamically generated here -->
		</tbody>
	</table>
    console.log({{ Orders }})


	</body>
</html>


<script>
	// Define an array of orders

	 orders = JSON.parse('{{ Orders | tojson | safe }}');


	// Get a reference to the table body element
	const tableBody = document.querySelector('tbody');

	// Loop through each order and generate a table row
	orders.forEach(order => {

        console.log({ order })


        let orderInfo = order.toString().split(",")

        console.log({ orderInfo })

		const row = tableBody.insertRow();

		const orderIDCell = row.insertCell();
		orderIDCell.textContent = orderInfo[0];

		const statusCell = row.insertCell();
		statusCell.textContent = orderInfo[1];

    const approveCell = row.insertCell();
    const approveForm = document.createElement('form');
    approveForm.action = '/WaiterOrder';
    approveForm.method = 'POST';
    approveForm.style.display = 'inline-block';
    const approveInput = document.createElement('input');
    approveInput.type = 'hidden';
    approveInput.name = 'order_id';
    approveInput.value = orderInfo[0];
    approveForm.appendChild(approveInput);
    const approveButton = document.createElement('button');
    approveButton.type = 'submit';
    approveButton.name = 'status';
    approveButton.value = '1';
    approveButton.textContent = 'Approve';
    approveForm.appendChild(approveButton);
    approveCell.appendChild(approveForm);

    const denyCell = row.insertCell();
    const denyForm = document.createElement('form');
    denyForm.action = '/WaiterOrder';
    denyForm.method = 'POST';
    denyForm.style.display = 'inline-block';
    const denyInput = document.createElement('input');
    denyInput.type = 'hidden';
    denyInput.name = 'order_id';
    denyInput.value = orderInfo[0];
    denyForm.appendChild(denyInput);
    const denyButton = document.createElement('button');
    denyButton.type = 'submit';
    denyButton.name = 'status';
    denyButton.value = '0';
    denyButton.textContent = 'Deny';
    denyForm.appendChild(denyButton);
    denyCell.appendChild(denyForm);

    const deleteCell = row.insertCell();
    const deleteButton = document.createElement('button');
    deleteButton.textContent = 'Delete';
    deleteCell.appendChild(deleteButton);

    deleteButton.addEventListener('click', () => {
        // Remove the corresponding row from the table
        tableBody.removeChild(row);
    });

});



    var cells = document.getElementById("orders").getElementsByTagName("td");

    if (cells[1].innerHTML == "0") {
        cells[1].style.backgroundColor = "red";
    }
    if (cells[1].innerHTML == "1") {
        cells[1].style.backgroundColor = "orange";
    }
    if (cells[1].innerHTML == "2") {
        cells[1].style.backgroundColor = "green";
    }
    if (cells[1].innerHTML == "3") {
        cells[1].style.backgroundColor = "blue";

}
</script>


















